(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{339:function(t,a,s){"use strict";s.r(a);var n=s(8),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[t._v("#")]),t._v(" 一、安装")]),t._v(" "),a("h3",{attrs:{id:"安装virtualbox"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装virtualbox"}},[t._v("#")]),t._v(" 安装virtualbox")]),t._v(" "),a("h4",{attrs:{id:"_1-安装vagrant"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装vagrant"}},[t._v("#")]),t._v(" 1.安装vagrant")]),t._v(" "),a("h4",{attrs:{id:"_2-安装centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装centos7"}},[t._v("#")]),t._v(" 2.安装Centos7")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 Vagrantfile")]),t._v("\nvagrant init centos/7\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须在指定文件地址启动")]),t._v("\nvagrant up\n")])])]),a("p",[a("strong",[t._v("镜像下载缓慢采用下载好镜像后添加方式")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 Vagrantfile")]),t._v("\nvagrant init centos/7\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加镜像")]),t._v("\nvagrant box add centos/7 文件地址\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须在指定文件地址启动")]),t._v("\nvagrant up\n")])])]),a("p",[a("strong",[t._v("开启SSH，并登陆到centos7")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vagrant ssh\n")])])]),a("p",[a("strong",[t._v('修改"Vagrantfile"文件，配置网络信息')])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('config.vm.network "private_network", ip: "192.168.56.10"\n')])])]),a("p",[a("strong",[t._v("重启虚拟机")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("vagrant reload\n")])])]),a("p",[a("strong",[t._v("开启远程登陆，修改“/etc/ssh/sshd_config”")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PermitRootLogin yes \nPasswordAuthentication yes\n")])])]),a("p",[a("strong",[t._v("重启SSHD")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[t._v("systemctl restart sshd\n")])])]),a("p",[a("strong",[t._v("外网ping不通")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[t._v("vi /etc/sysconfig/network-scripts/ifcfg-eth1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在NETMASK下添加网关和DNS")]),t._v("\nGATEWAY=192.168.56.1\nDNS1=114.114.114.114\nDNS2=8.8.8.8\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启网卡")]),t._v("\nservice network restart\n")])])]),a("p",[a("strong",[t._v("建立集群环境")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置统一ip")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2020/png/512093/1591341343311-9bc44e37-1934-4fae-a6ab-fdbbca850f94.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&originHeight=446&originWidth=1048&status=done&style=none&width=1048",alt:""}})]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建文件夹存放虚拟机生成Vagrantfile")]),t._v("\nvagrant init centos/7\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置vagrant文件")]),t._v('\nVagrant.configure("2") do |config|\n   (1..3).each do |i|\n        config.vm.define "k8s-node#{i}" do |node|\n            '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的Box")]),t._v('\n            node.vm.box = "centos/7"\n            '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的主机名")]),t._v('\n            node.vm.hostname="k8s-node#{i}"\n            '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的IP")]),t._v('\n            node.vm.network "private_network", ip: "192.168.56.#{99+i}", netmask: "255.255.255.0"\n            '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置主机与虚拟机的共享目录")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# node.vm.synced_folder "~/Documents/vagrant/share", "/home/vagrant/share"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# VirtaulBox相关配置")]),t._v('\n            node.vm.provider "virtualbox" do |v|\n                '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的名称")]),t._v('\n                v.name = "k8s-node#{i}"\n                '),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的内存大小")]),t._v("\n                v.memory = 4096\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置虚拟机的CPU个数")]),t._v("\n                v.cpus = 4\n            end\n        end\n   end\nend\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加镜像")]),t._v("\nvagrant box add centos/7 xxx.box文件地址\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须在指定文件地址启动")]),t._v("\nvagrant up\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 登录到虚拟机")]),t._v("\nvagrant ssh 虚拟机名\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到root用户，密码vagrant")]),t._v("\nsu root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启远程登录")]),t._v("\nvi /etc/ssh/sshd_config\nPermitRootLogin 改为yes \nPasswordAuthentication 改为yes\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启")]),t._v("\nsystemctl restart sshd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出，重复上面步骤")]),t._v("\nexit;\n")])])]),a("p",[t._v('在"网络地址转换"的连接方式下，三个节点的eth0，IP地址相同。')]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看k8s-node1的路由表")]),t._v("\nip route show\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看ip")]),t._v("\nip addr\n")])])]),a("p",[t._v("**原因分析：**这是因为它们使用是端口转发规则，使用同一个地址，通过不同的端口来区分。但是这种端口转发规则在以后的使用中会产生很多不必要的问题，所以需要修改为NAT网络类型。")]),t._v(" "),a("p",[a("strong",[t._v("解决方法：")])]),t._v(" "),a("ul",[a("li",[t._v('选择三个节点，然后执行“管理”->"全局设定"->“网络”，添加一个NAT网络。')]),t._v(" "),a("li",[t._v("分别修改每台设备的网络类型，设置->网络->连接方式->NET网络")])]),t._v(" "),a("p",[a("strong",[t._v("virtualbox虚拟机和主机不在同一网段互通")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/zhanglei082319/article/details/95923117",target:"_blank",rel:"noopener noreferrer"}},[t._v("详情点此链接"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"安装vmware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装vmware"}},[t._v("#")]),t._v(" 安装VMware")]),t._v(" "),a("p",[t._v("https://zhuanlan.zhihu.com/p/395220479")]),t._v(" "),a("p",[a("strong",[t._v("注：网络类型选择NAT")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("虚拟机IP设置：编辑->虚拟网络编辑器->更改设置->NAT模式->NAT设置")])]),t._v(" "),a("li",[a("p",[t._v("服务器IP设置")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1.修改配置文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi /etc/sysconfig/network-scripts/ifcfg-ens33")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 静态ip，ip地址才不会变化")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BOOTPROTO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("static\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ens33\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 系统启动是否激活网卡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ONBOOT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("yes\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IPADDR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".56.10\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GATEWAY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".56.2\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NETMASK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# DNS解析服务器，改成和网关一致")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DNS1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".56.2\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DNS2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.8")]),t._v(".8.8\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2.重启网卡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# service network restart")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"安装gradle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装gradle"}},[t._v("#")]),t._v(" 安装gradle")]),t._v(" "),a("p",[t._v("(1)配置环境变量")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装地址")]),t._v("\nGRADLE_HOME\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 仓库地址")]),t._v("\nGRADLE_USER_HOME\npath添加%GRADLE_HOME%\\bin\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 具体使用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("https")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("//blog.csdn.net/Holmes_shuai/article/details/119665758")]),t._v("\n")])])]),a("p",[t._v("（2）配置国内镜像")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在项目的根目录下找到如下文件：build.gradle在repositories里添加如下代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{url 'http://maven.aliyun.com/nexus/content/groups/public/'}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在apply上面，添加如下代码：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("allprojects")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\trepositories")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\t\tmaven{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("url 'http://maven.aliyun.com/nexus/content/groups/public/'}")]),t._v("\n\t\tmavenCentral()\n\t}\n}\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局配置（操作系统的当前用户）C:\\Users\\${Users}\\.gradle\\init.gradle添加")]),t._v("\nallprojects{\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    repositories")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ALIYUN_REPOSITORY_URL = 'http://maven.aliyun.com/nexus/content/groups/public'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ALIYUN_JCENTER_URL = 'http://maven.aliyun.com/nexus/content/repositories/jcenter'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        all")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ ArtifactRepository repo ->")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            if(repo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("instanceof MavenArtifactRepository){")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("url = repo.url.toString()")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("(url.startsWith('https://repo1.maven.org/maven2')) {")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                    project.logger.lifecycle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                    remove")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("repo")]),t._v("\n                }\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("(url.startsWith('https://jcenter.bintray.com/')) {")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                    project.logger.lifecycle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"Repository ${repo.url} replaced by $ALIYUN_JCENTER_URL."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("                    remove")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("repo")]),t._v("\n                }\n            }\n        }\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            url")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ALIYUN_REPOSITORY_URL")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            url")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ALIYUN_JCENTER_URL")]),t._v("\n        }\n    }\n}\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("allprojects")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    repositories")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'file:///D:/workSpace/maven/depository/'}")]),t._v("\n        mavenLocal()\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{ name "Alibaba" ; url "https://maven.aliyun.com/repository/public" }')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{ name "Bstek" ; url "http://nexus.bsdn.org/content/groups/public/" }')]),t._v("\n        mavenCentral()\n        jcenter()\n        \n    }\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    repositories")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("     \tmaven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'file:///D:/workSpace/maven/depository/'}")]),t._v("\n        mavenLocal()\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'https://maven.aliyun.com/repository/gradle-plugin' }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'https://maven.aliyun.com/repository/google' }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'https://maven.aliyun.com/nexus/content/groups/public/' }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ url 'https://maven.aliyun.com/repository/jcenter' }")]),t._v("\n        mavenCentral()\n        jcenter()\n    }\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    buildscript")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("        repositories")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n            mavenLocal()\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ name \"Alibaba\" ; url 'https://maven.aliyun.com/repository/public' }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ name \"Bstek\" ; url 'http://nexus.bsdn.org/content/groups/public/' }")]),t._v("\n            mavenCentral()\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("            maven")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{ name \"M2\" ; url 'https://plugins.gradle.org/m2/' }")]),t._v("\n            jcenter()\n        }\n    }\n}\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1.直接依赖第三方开源库，一般是托管在 jitpack 或者 jcenter")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\timplementation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("'com.google.code.gson:gson:2.2.4'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2.直接依赖本地的aar文件，一般是在libs目录下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\timplementation(name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("'LiteAVSDK_Professional_5.1.5293', ext: 'aar')")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3.直接依赖本地的jar文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\timplementation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("files('libs/bdasr_V3_20170801_60da871.jar')")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4.依赖本地的model")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("\timplementation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("project(':wavelibrary')")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5.去除重复依赖 project用括号包裹住")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("compile")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("(project(':uisdk:Library:facebook')) {")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    exclude")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("group: 'com.android.support', module: 'appcompat-v7'")]),t._v("\n}\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局移除")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("configurations.all")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("    exclude")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("group: 'android.arch.lifecycle', module: 'runtime'")]),t._v("\n}\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 作用域")]),t._v("\ngradle依赖的粒度控制相较于Maven也更加精细，maven只有compile、provided、test、runtime四种scope，而gradle有以下几种scope：\nimplementation，默认的scope。implementation的作用域会让依赖在编译和运行时均包含在内，但是不会暴露在类库使用者的编译时。举例，如果我们的类库包含了gson，那么其他人使用我们的类库时，编译时不会出现gson的依赖。\napi，和implementation类似，都是编译和运行时都可见的依赖。但是api允许我们将自己类库的依赖暴露给我们类库的使用者。\ncompileOnly和runtimeOnly，这两种顾名思义，一种只在编译时可见，一种只在运行时可见。而runtimeOnly和Maven的provided比较接近。\ntestImplementation，这种依赖在测试编译时和运行时可见，类似于Maven的test作用域。\ntestCompileOnly和testRuntimeOnly，这两种类似于compileOnly和runtimeOnly，但是作用于测试编译时和运行时。\n")])])]),a("h3",{attrs:{id:"安装vs-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装vs-code"}},[t._v("#")]),t._v(" 安装VS Code")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#插件安装")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Auto")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Close Tag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Auto")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Rename Tag")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Chinese")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("(Simplified) Language Pack for Visual Studio Code")]),t._v("\nESLint\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("HTML")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("CSS Support")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("HTML")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Snippets")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("JavaScript")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("(ES6) code snippets")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Live")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Server")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("open")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("in browser")]),t._v("\nVetur\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建全局代码片段  文件 ➡ 首选项 ➡ 用户代码片段 ➡ 点击新建全局代码片段 ➡ 取名 vue ➡ 确定")]),t._v("\n{\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('    "Print')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('to console": {')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('        "prefix"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"vue",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('        "body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("[")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "\x3c!--')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('$1 --\x3e",')]),t._v('\n            "<template>",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "<div')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("class='$2'>$5</div>\",")]),t._v('\n            "</template>",\n            "",\n            "<script>",\n            "//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "//例如：import')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("《组件名称》 from '《组件路径》';\",")]),t._v('\n            "",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "export')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('default {",')]),t._v('\n            "//import引入的组件需要注入到对象中才能使用",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "components')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{},",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "data()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{",')]),t._v('\n            "//这里存放数据",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "return')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{",')]),t._v('\n            "",\n            "};",\n            "},",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "//监听属性')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('类似于data概念",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "computed')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{},",')]),t._v('\n            "//监控data中的数据变化",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "watch')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{},",')]),t._v('\n            "//方法集合",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "methods')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{",')]),t._v('\n            "",\n            "},",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "//生命周期')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('- 创建完成（可以访问当前this实例）",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "created()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{",')]),t._v('\n            "",\n            "},",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "//生命周期')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('- 挂载完成（可以访问DOM元素）",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "mounted()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{",')]),t._v('\n            "",\n            "},",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "beforeCreate()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 创建之前",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "beforeMount()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 挂载之前",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "beforeUpdate()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 更新之前",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "updated()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 更新之后",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "beforeDestroy()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 销毁之前",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "destroyed()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //生命周期 - 销毁完成",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "activated()')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('{}, //如果页面有keep-alive缓存功能，这个函数会触发",')]),t._v('\n            "}",\n            "<\/script>",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "<style')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('scoped>",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('            "/*')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('@import url(); 引入公共css类 */",')]),t._v('\n            "$4",\n            "</style>"\n        ],\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('        "description"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"生成vue模板"')]),t._v("\n    },\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('    "http-get请求"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"prefix"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"httpget",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("[")]),t._v('\n\t\t"this.\\\\$http({",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"url')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("this.\\\\$http.adornUrl(''),\",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"method')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("'get',\",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"params')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('this.\\\\$http.adornParams({})",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"}).then(({')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('data }) => {",')]),t._v('\n\t\t"})"\n\t],\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"description"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"httpGET请求"')]),t._v("\n    },\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('    "http-post请求"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"prefix"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"httppost",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"body"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("[")]),t._v('\n\t\t"this.\\\\$http({",\n'),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"url')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("this.\\\\$http.adornUrl(''),\",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"method')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("'post',\",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"data')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('this.\\\\$http.adornData(data, false)",')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t\t"}).then(({')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('data }) => { });" ')]),t._v("\n\t],\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v('\t"description"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"httpPOST请求"')]),t._v("\n    }\n}\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#node.js安装并配置npm镜像")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("config set registry https://registry.npm.taobao.org")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装webpack和vue脚手架")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("install webpack -g")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("install -g @vue/cli-init")]),t._v("\n")])])]),a("h3",{attrs:{id:"typora图床"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typora图床"}},[t._v("#")]),t._v(" Typora图床")]),t._v(" "),a("h4",{attrs:{id:"_1-创建gitee仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建gitee仓库"}},[t._v("#")]),t._v(" 1. 创建gitee仓库")]),t._v(" "),a("p",[t._v("登录账号之后，创建一个仓库用于放置图片。")]),t._v(" "),a("p",[t._v("填写下图标注的三项内容，然后点击创建。")]),t._v(" "),a("ul",[a("li",[t._v("仓库名称随便设置；")]),t._v(" "),a("li",[t._v("是否开源：必须选择公开，否则无法通过链接引用图片；")]),t._v(" "),a("li",[t._v("选中”使用Readme文件初始化这个仓库“，这样就不用操作git初始化仓库了。")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"https://gitee.com/ming9966/img_bed/raw/master/202110/20211016_170630925_0.png",alt:"img"}}),t._v(" "),a("h4",{attrs:{id:"_2-配置脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置脚本"}},[t._v("#")]),t._v(" 2.配置脚本")]),t._v(" "),a("p",[t._v("​\t含有两个文件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("一个是powershell脚本imp_upload.ps1")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" namespace System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Drawing\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" namespace System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Drawing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Imaging\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" namespace System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IO\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#$check_size = 500*1024")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$check_size")]),t._v(" = 1024*1024\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$run_dir")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Split-Path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Parent "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MyInvocation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MyCommand"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Definition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path_log")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$run_dir")]),t._v('\\gitee_upload.log"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path_config")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$run_dir")]),t._v('\\config.json"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$([DateTime]::Now.ToString("')]),t._v("yyyy-MM-dd HH:mm:ss"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('")) Error: '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$msg")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Out-File")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Append "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path_log")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "log error"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$([DateTime]::Now.ToString("')]),t._v("yyyy-MM-dd HH:mm:ss"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('")) Info: '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$msg")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Out-File")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Append "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path_log")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" exit_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$reason")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write-Error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$reason")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("CategoryReason "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom error"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ErrorId "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom error"')]),t._v("\n    error "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"---exit_script---: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$reason")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get-Content")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path_config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConvertFrom-JSON")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    exit_script "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"config error :"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$now")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[DateTime]")]),t._v("::Now\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_month")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ToString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyyMM"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_dt")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ToString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yyyyMMdd_HHmmssfff"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url_file_new")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://gitee.com/api/v5/repos/{owner}/{repo}/contents/{path}"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$paths")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$args")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" compress "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Stream]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Stream]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ratio")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Image]")]),t._v("::FromStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Bitmap]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixelFormat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Graphics]")]),t._v("::FromImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置画布的描绘质量   ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CompositingQuality = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.CompositingQuality]")]),t._v("::HighQuality\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SmoothingMode = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.SmoothingMode]")]),t._v("::HighQuality\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("InterpolationMode = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.InterpolationMode]")]),t._v("::HighQualityBicubic\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DrawImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#以下代码为保存图片时，设置压缩质量  ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ep")]),t._v(" =  "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[EncoderParameters]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[long[]]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$qy")]),t._v(" = @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ratio")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置压缩的比例1-100 ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[EncoderParameter]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Encoder]")]),t._v("::Quality"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$qy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arrayICI")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[ImageCodecInfo]")]),t._v("::GetImageEncoders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$jpg_info")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"null"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("foreach")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ici")]),t._v(" in "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arrayICI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ici")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FormatDescription "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-eq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"JPEG"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$jpg_info")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ici")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$jpg_info")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-ne")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"null"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$jpg_info")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[ImageFormat]")]),t._v("::Jpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" convertToJpg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Stream]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Stream]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Image]")]),t._v("::FromStream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Bitmap]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixelFormat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Graphics]")]),t._v("::FromImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置画布的描绘质量   ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CompositingQuality = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.CompositingQuality]")]),t._v("::HighQuality\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SmoothingMode = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.SmoothingMode]")]),t._v("::HighQuality\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("InterpolationMode = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Drawing2D.InterpolationMode]")]),t._v("::HighQualityBicubic\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DrawImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[ImageFormat]")]),t._v("::Jpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Flush"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" upload "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$message")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url_file_new")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Replace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{owner}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("owner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Replace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{repo}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Replace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{path}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),t._v(" = @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access_token"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("access_token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"branch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$json")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConvertTo-Json")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Invoke-WebRequest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Uri "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Body "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$json")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Method POST "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ContentType "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json;charset=UTF-8"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConvertFrom-Json")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("download_url\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        error "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"upload failed"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ToString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Contains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(401)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#(401) 未经授权")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write-Error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access_token error"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write-Error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Exception "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Exception\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" handleNetImage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),t._v(" = 0\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resp")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Invoke-WebRequest")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GetType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-eq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Byte[]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Contains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Substring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IndexOf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Substring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastIndexOf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Substring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastIndexOf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$len")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Length\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$len")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-gt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$check_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if($len -gt $check_size*10){")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     $ratio = 60")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# } else{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     $ratio = 80")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[MemoryStream]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("$False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[MemoryStream]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# compress $inStream $outSteam $ratio")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用[ImageFormat]::Jpeg保存图像，可以减小文件大小，压缩率和图像质量比compress函数好")]),t._v("\n            convertToJpg "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".jpg"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Convert]")]),t._v("::ToBase64String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ToArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Convert]")]),t._v("::ToBase64String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$resp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_month")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_dt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v("_"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v('"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" upload "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Write-Error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed to load image from '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v('"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" handleLocalImage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),t._v(" = 0\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[FileInfo]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Exists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image path error"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Extension\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-gt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$check_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if($info.Length -gt $check_size*10){")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     $ratio = 60")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# } else{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     $ratio = 80")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[FileStream]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FullName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[FileMode]")]),t._v("::Open"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[MemoryStream]")]),t._v("::new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# compress $inStream $outSteam $ratio")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用[ImageFormat]::Jpeg保存图像，可以减小文件大小，压缩率和图像质量比compress函数好")]),t._v("\n        convertToJpg "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".jpg"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Convert]")]),t._v("::ToBase64String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ToArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$inStream")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$outSteam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dispose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[Convert]")]),t._v("::ToBase64String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[System.IO.File]")]),t._v("::ReadAllBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FullName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_month")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$str_dt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v("_"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_ext")]),t._v('"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" upload "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$b64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gitee_path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$img_name")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" handle "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("param")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),t._v(" = 0\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$downUrl")]),t._v(" = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StartsWith"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-or")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StartsWith"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$downUrl")]),t._v(" = handleNetImage "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$downUrl")]),t._v(" = handleLocalImage "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$path")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$idx")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$downUrl")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v("=0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-lt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    handle "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$paths")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("trap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    error "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("一个是配置文件config.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"owner"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"个人空间地址"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repo"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"仓库名"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"branch"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"access_token"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"私人令牌"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h4",{attrs:{id:"_3-配置typora"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置typora"}},[t._v("#")]),t._v(" 3.配置Typora")]),t._v(" "),a("p",[t._v("打开Typroa， 顶部菜单点击 文件 - 偏好设置 - 图像。按下图设置（旧版Typora可能不支持以下设置）。")]),t._v(" "),a("p",[t._v("命令填入： "),a("code",[t._v('PowerShell -ExecutionPolicy Bypass -File "img_upload.ps1脚本路径"')])]),t._v(" "),a("p",[t._v("例： "),a("code",[t._v('PowerShell -ExecutionPolicy Bypass -File "D:\\0tmp\\img_upload\\img_upload.ps1"')])]),t._v(" "),a("h3",{attrs:{id:"安装wsl2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装wsl2"}},[t._v("#")]),t._v(" 安装WSL2")]),t._v(" "),a("p",[t._v("https://www.jianshu.com/p/6f3195bad5f1")]),t._v(" "),a("p",[a("strong",[t._v("注: 需要Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11")])]),t._v(" "),a("h4",{attrs:{id:"_1-启动-适用于linux的windows子系统-和-虚拟机-两个功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-启动-适用于linux的windows子系统-和-虚拟机-两个功能"}},[t._v("#")]),t._v(" 1.启动“适用于linux的windows子系统”和“虚拟机”两个功能")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.打开powershell，win+x,a")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.启用适用于Linux的Windwos子系统")]),t._v("\ndism"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("online "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enable-feature")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("featurename:Microsoft-Windows-Subsystem-Linux "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("all "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("norestart\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3.启用虚拟机功能")]),t._v("\ndism"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("online "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enable-feature")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("featurename:VirtualMachinePlatform "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("all "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("norestart\n")])])]),a("h4",{attrs:{id:"_2-在bios中开启虚拟化-重启电脑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-在bios中开启虚拟化-重启电脑"}},[t._v("#")]),t._v(" 2.在bios中开启虚拟化,重启电脑")]),t._v(" "),a("h4",{attrs:{id:"_3-下载linux内核更新包-并安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-下载linux内核更新包-并安装"}},[t._v("#")]),t._v(" 3.下载Linux内核更新包，并安装")]),t._v(" "),a("p",[t._v("https://learn.microsoft.com/zh-cn/windows/wsl/install-manual")]),t._v(" "),a("h4",{attrs:{id:"_4-将wsl2版本设置为默认版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-将wsl2版本设置为默认版本"}},[t._v("#")]),t._v(" 4.将wsl2版本设置为默认版本")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("wsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set-default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("version 2\n")])])]),a("h4",{attrs:{id:"_5-安装ubuntu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装ubuntu"}},[t._v("#")]),t._v(" 5.安装ubuntu")]),t._v(" "),a("p",[t._v("微软商店安装")]),t._v(" "),a("p",[a("strong",[t._v("注：启动提示，参考的对象类型不支持尝试的操作”的故障导致无法使用，添加以下注册表")])]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("Windows Registry Editor Version 5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("00\n \n"),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WinSock2\\Parameters\\AppId_Catalog\\0408F7A3]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"AppFullPath"')]),t._v("="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Windows\\\\System32\\\\wsl.exe"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PermittedLspCategories"')]),t._v("=dword:80000000\n")])])]),a("h4",{attrs:{id:"_6-修改安装路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-修改安装路径"}},[t._v("#")]),t._v(" 6.修改安装路径")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看运行状态")]),t._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("l "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("v\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭")]),t._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("shutdown\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导出当前Linux的镜像 Ubuntu为wsl -l -v中的系统名字")]),t._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("export Ubuntu D:\\workSpace\\Ubuntu2204\\ubuntu22"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("04"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注销之前的系统并检查")]),t._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("unregister Ubuntu\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入镜像")]),t._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("import ubuntu2204 D:\\workSpace\\Ubuntu2204\\ D:\\workSpace\\Ubuntu2204\\ubuntu20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("04"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("version 2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置先前设置的默认登录用户 ubuntu2204为导入镜像时起的名字，xxx为之前设置的用户")]),t._v("\nubuntu2204"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("default-user xxx\n")])])]),a("h4",{attrs:{id:"_7-安装dockerdesktop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-安装dockerdesktop"}},[t._v("#")]),t._v(" 7.安装DockerDeskTop")]),t._v(" "),a("p",[t._v("官网：https://www.docker.com/")]),t._v(" "),a("p",[t._v("迁移：https://cloud.tencent.com/developer/article/1679501")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改安装位置")]),t._v("\nmklink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Program Files\\Docker"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\javaTools\\docker"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改相关文件安装目录")]),t._v("\nmklink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Users\\你的用户名\\AppData\\Local\\Docker"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\workSpace\\Docker\\Local"')]),t._v("\n \nmklink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Users\\dlam3\\AppData\\Roaming\\Docker"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\workSpace\\Docker\\Roaming\\Docker"')]),t._v("\n \nmklink "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\Users\\dlam3\\AppData\\Roaming\\Docker Desktop"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"D:\\workSpace\\Docker\\Roaming\\Docker Desktop"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\nComplete the installation of Docker Desktop-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(">Use advanced settings-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(">Manually update WSL 2 myself\n")])])]),a("h4",{attrs:{id:"_8-直接在ubantu安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-直接在ubantu安装docker"}},[t._v("#")]),t._v(" 8.直接在ubantu安装docker")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装前先卸载操作系统默认安装的docker，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" remove "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" docker-engine docker.io containerd runc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更换apt源 清华：https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/ 阿里：https://developer.aliyun.com/mirror/ubuntu/?spm=a2c6h.25603864.0.0.2b5223b8KyFvMQ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" /etc/apt/sources.list /etc/apt/sources.list.bak\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/apt/source.list\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" upgrade\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装必要支持")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" apt-transport-https ca-certificates "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" gnupg-agent software-properties-common\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-fsSL")]),t._v(" https://download.docker.com/linux/ubuntu/gpg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" add-apt-repository "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deb [arch=amd64] https://download.docker.com/linux/ubuntu '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("lsb_release "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-cs")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(' stable"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行如下命令，安装合适版本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-cache")]),t._v(" madison docker-ce\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-cache")]),t._v(" madison docker-ce-cli\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(":20.10.24~3-0~ubuntu-jammy docker-ce-cli"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(":20.10.24~3-0~ubuntu-jammy containerd.io\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开机自启")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),a("h2",{attrs:{id:"二、使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、使用"}},[t._v("#")]),t._v(" 二、使用")]),t._v(" "),a("h3",{attrs:{id:"idea配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#idea配置"}},[t._v("#")]),t._v(" IDEA配置")]),t._v(" "),a("h4",{attrs:{id:"_1代码注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1代码注释"}},[t._v("#")]),t._v(" ①代码注释")]),t._v(" "),a("p",[t._v("(1)File | Settings | Editor | File and Code Templates里的class修改为")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PACKAGE_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PACKAGE_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PACKAGE_NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("#end\n#"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"File Header.java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("(2)includes中File Header修改为")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @author     ：J-Ming\n * @date       ：Created in ${DATE} ${TIME}\n * @description：${description}\n **/")]),t._v("\n")])])]),a("p",[t._v("(3)File | Settings | Editor | Live Templates建一个组")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@author")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@date")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" @"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v(" \n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n     \n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//param脚本:")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("groovyScript")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token interpolation-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"if(\\"')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_1")])]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\\".length() == 2) {return '';} else {def result=''; def params=\\\"")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_1")])]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\\".replaceAll('[\\\\\\\\[|\\\\\\\\]|\\\\\\\\s]', '').split(',').toList();for(i = 0; i < params.size(); i++) {result+='\\\\n' + ' * @param ' + params[i] + ' '}; return result;}\"")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("methodParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法注释")]),t._v("\n模板：\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" \n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@author")]),t._v(" J"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Ming \n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@date")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("param"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n\nparam"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("groovyScript")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token interpolation-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"def result = '';def params = \\\"")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_1")])]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\\".replaceAll('[\\\\\\\\[|\\\\\\\\]|\\\\\\\\s]', '').split(',').toList(); for(i = 0; i < params.size(); i++) {if(params[i] != '')result+='* @param ' + params[i] + ((i < params.size() - 1) ? '\\\\r\\\\n ' : '')}; return result == '' ? null : '\\\\r\\\\n ' + result\"")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("methodParameters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("groovyScript")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token interpolation-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"return \\"')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_1")])]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\\" == 'void' ? null : '\\\\r\\\\n * @return ' + \\\"")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("_1")])]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\""')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("methodReturnType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])])]),a("p",[t._v("(4)在idea里面格式化代码的时候，注释也会被格式化")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("File | Settings | Editor | Code Style | Java | javadoc \n\n将enable javadoc formating取消掉\n")])])]),a("h4",{attrs:{id:"_2插件安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2插件安装"}},[t._v("#")]),t._v(" ②插件安装")]),t._v(" "),a("p",[t._v("（1）FindBugs-IDEA静态代码分析")]),t._v(" "),a("p",[t._v("（2）Alibaba Java Coding Guidelines 代码规约")]),t._v(" "),a("p",[t._v("（3）Coding Easier 翻译+字符串处理")]),t._v(" "),a("p",[t._v("（4）Free Mybatis plugin")]),t._v(" "),a("p",[a("strong",[t._v("禁用不必要插件")])]),t._v(" "),a("p",[t._v("https://fangweilong.github.io/2018/04/25/idea%E5%85%B3%E9%97%AD%E4%B8%8D%E5%BF%85%E8%A6%81%E7%9A%84%E6%8F%92%E4%BB%B6%E5%87%8F%E5%B0%91%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8/")]),t._v(" "),a("h3",{attrs:{id:"git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" GIT")]),t._v(" "),a("h4",{attrs:{id:"_1删除已提交文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1删除已提交文件"}},[t._v("#")]),t._v(" ①删除已提交文件")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[t._v("首先进入你的master文件夹下, Git Bash Here ,打开命令窗口\n\n$ git --help                   # 帮助命令\n\n \n\n$ git pull origin master          # 将远程仓库里面的项目拉下来\n\n$ dir                        # 查看有哪些文件夹\n\n$ git rm -r --cached .idea       # 删除.idea文件夹\n$ git commit -m '删除.idea'    # 提交,添加操作说明\n$ git push -u origin master               # 将本次更改更新到github项目上去\n")])])]),a("h4",{attrs:{id:"_2拉取指定分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2拉取指定分支"}},[t._v("#")]),t._v(" ②拉取指定分支")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("1》与远程仓库建立连接：git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("remote add origin XXXXX.git")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("2》使用git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("branch 查看本地是否具有dev分支")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("3》如果没有")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("git fetch origin dev")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("4》git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("checkout -b dev origin/dev在本地创建分支dev并切换到该分支")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("5》git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("pull origin dev就可以把gitLab上dev分支上的内容都拉取到本地了")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("-b name;")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3提交代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3提交代码"}},[t._v("#")]),t._v(" ③提交代码")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拉取")]),t._v("\ngit pull\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1、新建一个分支")]),t._v("\ngit branch newBranch\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2、检查分支是否创建成功")]),t._v("\ngit branch\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3、切换到新建的分支")]),t._v("\ngit checkout newBranch\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4、将改动提交到新分支")]),t._v('\ngit add .\ngit commit -m "the new branch"\n\n'),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5、检查是否提交新分支成功")]),t._v("\ngit status\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#6、切回到主分支")]),t._v("\ngit checkout master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#7、新分支提交的改动合并到主分支")]),t._v("\ngit merge newBranch\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#8、push代码到远端仓库")]),t._v("\ngit push -u origin master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#9、删除新分支")]),t._v("\ngit branch -D newBranch\n\n")])])]),a("h3",{attrs:{id:"gradle与maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle与maven"}},[t._v("#")]),t._v(" Gradle与Maven")]),t._v(" "),a("h4",{attrs:{id:"gradle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle"}},[t._v("#")]),t._v(" gradle:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高版本gradle使用Lombok需要添加以下配置")]),t._v("\ndependencies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\timplementation 'org.projectlombok"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("lombok"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.18.4'\n    annotationProcessor 'org.projectlombok"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("lombok"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.18.4'\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 打jar包时将sun公司jar包引入")]),t._v('\n    implementation(fileTree(mapOf("dir" to "libs"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(' "include" to listOf("'),a("span",{pre:!0,attrs:{class:"token important"}},[t._v('*.jar"))))')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打包成一个Jar")]),t._v("\njar "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    manifest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        attributes(\n                "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("'Main-Class'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.ming.ImageUpload'")]),t._v("\n        )\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    from "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }")]),t._v("\n    \tconfigurations.runtime.collect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("zipTree(it)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置编码")]),t._v("\ntasks.withType(JavaCompile) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('\n    options.encoding = "UTF'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('8"\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"生成jar包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成jar包"}},[t._v("#")]),t._v(" 生成jar包")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n *\t1.打包成一个Jar\n *\t执行命令gradle build或者./gradlew build，可在build/libs查看生成的jar包\n **/")]),t._v("\njar "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    manifest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                '"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Main")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),a("span",{pre:!0,attrs:{class:"token char"}},[t._v("': '")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ming"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("ImageUpload")]),t._v("'\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    from "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        configurations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtimeClasspath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" it "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("zipTree")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//configurations.runtime.collect{zipTree(it)}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n *  2.打包成多个Jar\n *\t执行命令gradle release或者./gradlew relesse，可在build/libs查看生成的jar包 打包成多个Jar\n **/")]),t._v("\njar "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    manifest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        attributes '"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Main")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),t._v("'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" appMainClass\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntask "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearJar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Delete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    delete 'build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("libs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("lib'\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntask "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyJar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    from configurations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("into")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("'build"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("libs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("lib'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ntask "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("release")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Copy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dependsOn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clearJar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" copyJar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\t3.使用application插件\n *\t执行命令gradle (run、startScript、installApp、distZip、distTar)之一\n *  查看build/distributions会有两个压缩文件,压缩文件\n *\t包含了两个文件夹，bin为启动脚本，lib则是软件jar包和依赖。\n *  还可以执行./gradlew installDist生成未压缩文件目录build/install\n **/")]),t._v("\napply plugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" 'application'\nmainClassName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" 'appMainClass'\n")])])]),a("h4",{attrs:{id:"maven"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maven"}},[t._v("#")]),t._v(" maven:")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# maven手动导入jar包")]),t._v("\nmvn install:install-file -Dfile=D:\\workSpace\\bairui\\CQ\\ChongQingBank\\BairuiPlatform\\fileConvert\\lib\\aspose-cells-8.5.2.jar -DgroupId=com.aspose -DartifactId=aspose-cells -Dversion=8.5.2 -Dpackaging=jar\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);